<% if current_user %>
  <% if object.likes.where(user_id: current_user.id).first.present? %>
    <%= render partial: 'likes/unlike', 
        locals: {like: object.likes.where(user_id: current_user.id).first} %>
  <% else %>
    <%= render partial: 'likes/like', 
        locals: {like: { likeable_id: object.id, likeable_type: object.class.to_s } } %>
  <% end %>
<% end %>

<%= render 'likes/likes_count', object: object %>